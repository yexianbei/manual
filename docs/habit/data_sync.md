# 数据同步与备份

小习惯App提供数据同步和备份功能，确保您的习惯数据安全且可在多设备间无缝使用。本指南将帮助您了解如何管理数据同步和备份。

## 数据同步

### 自动同步

小习惯App默认开启自动同步功能，您的数据会在以下情况自动同步到云端：

- 创建或修改习惯计划时
- 完成习惯打卡时
- 编辑习惯日记时
- 修改个人设置时
- 应用退出时

**注意**：自动同步需要网络连接。在无网络环境下，数据会暂存在本地，待网络恢复后自动上传。

### 手动同步

您也可以手动触发数据同步：

1. 打开小习惯App
2. 点击"我的"选项卡
3. 点击"设置"
4. 选择"数据与同步"
5. 点击"立即同步"按钮

手动同步适用于以下情况：
- 怀疑数据未正确同步
- 长时间离线使用后重新联网
- 在多设备间快速更新数据

### 同步状态查看

您可以在"数据与同步"页面查看最近一次同步的时间和状态：
- "已同步"：数据已完全同步到云端
- "同步中"：正在进行数据同步
- "等待同步"：有数据等待同步
- "同步失败"：同步过程中出现错误

## 数据备份

### 自动备份

小习惯App会定期自动备份您的数据：
- 免费用户：每周自动备份一次
- 会员用户：每天自动备份一次

自动备份包含以下数据：
- 所有习惯计划
- 习惯完成记录
- 习惯日记
- 个人设置

### 手动备份

您可以随时创建手动备份：

1. 进入"数据与同步"页面
2. 点击"备份管理"
3. 点击"创建新备份"按钮
4. 输入备份描述（可选）
5. 点击"确认"开始备份

**提示**：建议在进行重要更改前创建手动备份，如批量删除习惯、重置数据等。

### 查看备份历史

您可以查看和管理历史备份：

1. 进入"备份管理"页面
2. 查看备份列表，包含：
   - 备份创建时间
   - 备份类型（自动/手动）
   - 备份大小
   - 备份描述（如有）
3. 点击任意备份可查看详情

### 备份保留策略

备份文件的保留策略如下：
- 免费用户：保留最近3个备份
- 会员用户：保留最近30个备份

超出保留数量的旧备份将被自动删除。

## 数据恢复

### 从备份恢复

如需从备份恢复数据：

1. 进入"备份管理"页面
2. 选择要恢复的备份
3. 点击"恢复数据"按钮
4. 选择恢复方式：
   - "完全恢复"：将覆盖当前所有数据
   - "选择性恢复"：仅恢复选定的数据类型
5. 确认恢复操作

**警告**：完全恢复将覆盖当前设备上的所有数据，请谨慎操作。

### 跨设备恢复

当您在新设备上登录小习惯账号时，系统会自动提示是否恢复数据：

1. 在新设备上登录小习惯账号
2. 系统检测到云端有数据，会提示"是否恢复云端数据"
3. 点击"恢复"，等待数据下载完成
4. 数据恢复完成后，您可以继续使用

## 多设备数据管理

### 数据冲突处理

当您在多个设备上同时使用小习惯App时，可能偶尔出现数据冲突。系统会按以下规则处理冲突：

1. 时间优先：保留最新修改的数据
2. 详细优先：保留信息更完整的数据
3. 手动选择：对于无法自动解决的冲突，系统会提示您手动选择

### 设备管理

您可以查看和管理已登录的设备：

1. 进入"数据与同步"页面
2. 点击"设备管理"
3. 查看当前登录的所有设备，包括：
   - 设备名称
   - 最近登录时间
   - 设备型号
4. 点击设备右侧的"退出登录"可将该设备移除

## 常见问题

### 数据同步失败怎么办？

如果遇到同步失败：
- 检查网络连接是否正常
- 确认账号登录状态
- 尝试手动触发同步
- 重启应用后再次尝试
- 如问题持续，请尝试清除缓存后重新登录

### 备份占用空间太大？

备份文件会占用云存储空间：
- 免费用户：总计100MB云存储空间
- 会员用户：总计5GB云存储空间

如空间不足，可以：
- 删除不必要的旧备份
- 升级为会员获取更多空间
- 导出备份到本地存储

### 如何导出数据到本地？

会员用户可以将数据导出到本地：
1. 进入"备份管理"页面
2. 选择要导出的备份
3. 点击"导出"按钮
4. 选择导出格式（CSV或JSON）
5. 选择保存位置

如有其他数据同步或备份问题，请联系客服：support@xiaoxiguan.com

[返回准备工作](/FunctionGuider.md)